import{_ as v,r as u,c as y,j as x,o as _,a as f,d as r,t as S,n as p,e as I,F as b,f as k}from"./index-Bx1ytlSE.js";const P={__name:"ScratchCard",props:{backgroundImage:{type:String,required:!0},textColor:{type:String,default:"#000000"},text:{type:String,required:!0}},setup(i){const c=i,n=u(null),l=y(()=>({backgroundImage:`url(${c.backgroundImage})`}));return x(()=>{const t=n.value,o=t.getContext("2d");(()=>{t.width=t.offsetWidth,t.height=t.offsetHeight,o.fillStyle="#888",o.fillRect(0,0,t.width,t.height)})();const h=(a,e)=>{const s=a.getBoundingClientRect();return{x:e.clientX-s.left,y:e.clientY-s.top}},g=(a,e)=>{const s=a.getBoundingClientRect(),m=e.touches[0];return{x:m.clientX-s.left,y:m.clientY-s.top}},d=(a,e)=>{o.globalCompositeOperation="destination-out",o.beginPath(),o.arc(a,e,40,0,2*Math.PI,!1),o.fill()};t.addEventListener("mousemove",a=>{if(a.buttons===1){const e=h(t,a);d(e.x,e.y)}}),t.addEventListener("mousedown",a=>{const e=h(t,a);d(e.x,e.y)}),t.addEventListener("touchmove",a=>{a.preventDefault();const e=g(t,a);d(e.x,e.y)}),t.addEventListener("touchstart",a=>{const e=g(t,a);d(e.x,e.y)})}),(t,o)=>(_(),f("div",{class:"card",style:p(l.value)},[r("canvas",{class:"scratch-canvas",ref_key:"scratchCanvas",ref:n},null,512),r("div",{class:"card-text",style:p({color:c.textColor})},S(c.text),5)],4))}},R=v(P,[["__scopeId","data-v-b32dec6e"]]),w=r("h1",null,"Card",-1),L=r("h3",null,[r("span",{class:"underlined-text"},"Scratch the card"),k(" for a pleasant surprise")],-1),E={__name:"CardView",setup(i){const c=u(""),n=u(""),l=u(""),t=()=>{const o=new URLSearchParams(window.location.search);c.value=decodeURIComponent(o.get("text")||""),n.value=decodeURIComponent(o.get("img")||""),l.value=decodeURIComponent(o.get("color")||"")};return x(()=>{t()}),(o,C)=>(_(),f(b,null,[w,L,I(R,{text:c.value,backgroundImage:n.value,textColor:l.value},null,8,["text","backgroundImage","textColor"])],64))}};export{E as default};
